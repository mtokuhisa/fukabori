<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ·±å €ãã‚“ - KnowledgeFileManager ãƒ†ã‚¹ãƒˆãƒ„ãƒ¼ãƒ«</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
        }

        .header h1 {
            color: #333;
            margin-bottom: 10px;
            font-size: 2.5em;
        }

        .header p {
            color: #666;
            font-size: 1.1em;
        }

        .test-controls {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .test-button {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 15px 25px;
            border-radius: 12px;
            font-size: 1.1em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: none;
        }

        .test-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
        }

        .test-button:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
        }

        .test-button.success {
            background: linear-gradient(45deg, #4CAF50, #45a049);
        }

        .test-button.error {
            background: linear-gradient(45deg, #f44336, #d32f2f);
        }

        .progress-section {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 30px;
        }

        .progress-bar {
            width: 100%;
            height: 20px;
            background: #e0e0e0;
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 15px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(45deg, #4CAF50, #45a049);
            transition: width 0.3s ease;
            width: 0%;
        }

        .status-text {
            font-size: 1.1em;
            font-weight: bold;
            color: #333;
            text-align: center;
        }

        .results-section {
            margin-top: 30px;
        }

        .results-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }

        .result-card {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            border-left: 5px solid #ddd;
        }

        .result-card.pass {
            border-left-color: #4CAF50;
        }

        .result-card.fail {
            border-left-color: #f44336;
        }

        .result-card.running {
            border-left-color: #2196F3;
        }

        .result-title {
            font-size: 1.2em;
            font-weight: bold;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .result-status {
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.9em;
            font-weight: bold;
        }

        .status-pass {
            background: #e8f5e8;
            color: #4CAF50;
        }

        .status-fail {
            background: #ffebee;
            color: #f44336;
        }

        .status-running {
            background: #e3f2fd;
            color: #2196F3;
        }

        .result-details {
            margin-top: 15px;
        }

        .result-time {
            color: #666;
            font-size: 0.9em;
        }

        .error-details {
            background: #ffebee;
            border: 1px solid #ffcdd2;
            border-radius: 8px;
            padding: 10px;
            margin-top: 10px;
            font-family: monospace;
            font-size: 0.9em;
            color: #c62828;
        }

        .summary-section {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            border-radius: 12px;
            padding: 25px;
            margin-top: 30px;
            text-align: center;
        }

        .summary-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .stat-item {
            background: rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            padding: 15px;
        }

        .stat-number {
            font-size: 2em;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .log-section {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 20px;
            margin-top: 30px;
        }

        .log-controls {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }

        .log-controls .glass-button {
            padding: 8px 16px;
            font-size: 0.9em;
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .log-controls .glass-button:hover {
            transform: translateY(-1px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        #logContainer {
            max-height: 400px;
            overflow-y: auto;
            background: white;
            border-radius: 8px;
            padding: 15px;
            border: 1px solid #e0e0e0;
        }

        .log-item {
            padding: 8px 0;
            border-bottom: 1px solid #eee;
            font-family: monospace;
            font-size: 0.9em;
        }

        .log-item:last-child {
            border-bottom: none;
        }

        .log-time {
            color: #666;
            margin-right: 10px;
        }

        .log-level-info {
            color: #2196F3;
        }

        .log-level-success {
            color: #4CAF50;
        }

        .log-level-error {
            color: #f44336;
        }

        .log-level-warn {
            color: #ff9800;
        }

        .spinner {
            border: 3px solid #f3f3f3;
            border-top: 3px solid #667eea;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            animation: spin 1s linear infinite;
            display: inline-block;
            margin-right: 10px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .hidden {
            display: none;
        }

        .diagnostic-section {
            background: #f0f8ff;
            border-radius: 12px;
            padding: 20px;
            margin-top: 30px;
            border: 2px solid #667eea;
        }

        .diagnostic-controls {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .diagnostic-controls .glass-button {
            padding: 8px 16px;
            font-size: 0.9em;
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .diagnostic-controls .glass-button:hover {
            transform: translateY(-1px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .diagnostic-content {
            background: white;
            border-radius: 8px;
            padding: 20px;
            border: 1px solid #e0e0e0;
            font-family: monospace;
            font-size: 0.9em;
            max-height: 500px;
            overflow-y: auto;
            white-space: pre-wrap;
            word-wrap: break-word;
        }

        .diagnostic-section h4 {
            color: #667eea;
            margin-top: 20px;
            margin-bottom: 10px;
            font-size: 1.1em;
        }

        .diagnostic-section .error-highlight {
            background: #ffebee;
            border-left: 4px solid #f44336;
            padding: 10px;
            margin: 10px 0;
            border-radius: 4px;
        }

        .diagnostic-section .warning-highlight {
            background: #fff3e0;
            border-left: 4px solid #ff9800;
            padding: 10px;
            margin: 10px 0;
            border-radius: 4px;
        }

        .diagnostic-section .info-highlight {
            background: #e3f2fd;
            border-left: 4px solid #2196F3;
            padding: 10px;
            margin: 10px 0;
            border-radius: 4px;
        }

        .copy-notification {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: #4CAF50;
            color: white;
            padding: 15px 25px;
            border-radius: 8px;
            font-weight: bold;
            z-index: 1000;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .copy-notification.show {
            opacity: 1;
        }

        .config-section {
            background: #f0f0f0;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 30px;
        }

        .config-item {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 15px;
        }

        .config-item label {
            min-width: 150px;
            font-weight: bold;
        }

        .config-item input, .config-item select {
            flex: 1;
            padding: 8px 12px;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-size: 1em;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- ãƒ˜ãƒƒãƒ€ãƒ¼ -->
        <div class="header">
            <h1>ğŸ§ª KnowledgeFileManager ãƒ†ã‚¹ãƒˆãƒ„ãƒ¼ãƒ«</h1>
            <p>æ·±å €ãã‚“ã®ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œã—ã¦ã€å‹•ä½œç¢ºèªãŒã§ãã¾ã™</p>
        </div>

        <!-- è¨­å®šã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
        <div class="config-section">
            <h3>âš™ï¸ ãƒ†ã‚¹ãƒˆè¨­å®š</h3>
            <div class="config-item">
                <label>ãƒ†ã‚¹ãƒˆå®Ÿè¡Œé€Ÿåº¦:</label>
                <select id="testSpeed">
                    <option value="normal">é€šå¸¸é€Ÿåº¦</option>
                    <option value="fast">é«˜é€Ÿå®Ÿè¡Œ</option>
                    <option value="slow">è©³ç´°ç¢ºèª</option>
                </select>
            </div>
            <div class="config-item">
                <label>ãƒ­ã‚°ãƒ¬ãƒ™ãƒ«:</label>
                <select id="logLevel">
                    <option value="all">å…¨ã¦è¡¨ç¤º</option>
                    <option value="important">é‡è¦ãªã‚‚ã®ã®ã¿</option>
                    <option value="errors">ã‚¨ãƒ©ãƒ¼ã®ã¿</option>
                </select>
            </div>
            <div class="config-item">
                <label>è‡ªå‹•ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«:</label>
                <input type="checkbox" id="autoScroll" checked>
                <span>ãƒ†ã‚¹ãƒˆçµæœã‚’è‡ªå‹•ã§ä¸‹ã«ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«</span>
            </div>
        </div>

        <!-- ãƒ†ã‚¹ãƒˆå®Ÿè¡Œãƒœã‚¿ãƒ³ -->
        <div class="test-controls">
            <button class="test-button" id="runAllTestsBtn" onclick="runAllTestsUI()">
                ğŸš€ å…¨ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
            </button>
            <button class="test-button" id="runPhase1Btn" onclick="runPhase1TestsUI()">
                ğŸ”§ Phase 1ãƒ†ã‚¹ãƒˆ
            </button>
            <button class="test-button" id="runIntegrationBtn" onclick="runIntegrationTestUI()">
                ğŸ”— çµ±åˆãƒ†ã‚¹ãƒˆ
            </button>
            <button class="test-button" id="runIndividualBtn" onclick="showIndividualTests()">
                ğŸ“‹ å€‹åˆ¥ãƒ†ã‚¹ãƒˆ
            </button>
            <button class="test-button" id="clearResultsBtn" onclick="clearResults()">
                ğŸ—‘ï¸ çµæœã‚¯ãƒªã‚¢
            </button>
            <button class="test-button" id="exportResultsBtn" onclick="exportResults()">
                ğŸ“„ çµæœã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ
            </button>
            <button class="test-button" id="copyLogsBtn" onclick="copyAllLogs()">
                ğŸ“‹ ãƒ­ã‚°ã‚³ãƒ”ãƒ¼
            </button>
            <button class="test-button" id="generateReportBtn" onclick="generateDiagnosticReport()">
                ğŸ” è¨ºæ–­ãƒ¬ãƒãƒ¼ãƒˆ
            </button>
        </div>

        <!-- é€²è¡ŒçŠ¶æ³ -->
        <div class="progress-section">
            <h3>ğŸ“Š ãƒ†ã‚¹ãƒˆé€²è¡ŒçŠ¶æ³</h3>
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
            <div class="status-text" id="statusText">ãƒ†ã‚¹ãƒˆã‚’é–‹å§‹ã—ã¦ãã ã•ã„</div>
        </div>

        <!-- ãƒ†ã‚¹ãƒˆçµæœ -->
        <div class="results-section">
            <h3>ğŸ“‹ ãƒ†ã‚¹ãƒˆçµæœ</h3>
            <div class="results-grid" id="resultsGrid">
                <!-- çµæœã‚«ãƒ¼ãƒ‰ãŒå‹•çš„ã«è¿½åŠ ã•ã‚Œã‚‹ -->
            </div>
        </div>

        <!-- ã‚µãƒãƒªãƒ¼ -->
        <div class="summary-section" id="summarySection" style="display: none;">
            <h3>ğŸ¯ ãƒ†ã‚¹ãƒˆçµæœã‚µãƒãƒªãƒ¼</h3>
            <div class="summary-stats">
                <div class="stat-item">
                    <div class="stat-number" id="totalTests">0</div>
                    <div>ç·ãƒ†ã‚¹ãƒˆæ•°</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number" id="passedTests">0</div>
                    <div>æˆåŠŸ</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number" id="failedTests">0</div>
                    <div>å¤±æ•—</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number" id="totalTime">0ms</div>
                    <div>å®Ÿè¡Œæ™‚é–“</div>
                </div>
            </div>
        </div>

        <!-- ãƒ­ã‚° -->
        <div class="log-section">
            <h3>ğŸ“ ãƒ†ã‚¹ãƒˆãƒ­ã‚°</h3>
            <div class="log-controls">
                <button class="glass-button" onclick="copyAllLogs()">ğŸ“‹ å…¨ãƒ­ã‚°ã‚³ãƒ”ãƒ¼</button>
                <button class="glass-button" onclick="copyErrorLogs()">âŒ ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ã®ã¿ã‚³ãƒ”ãƒ¼</button>
                <button class="glass-button" onclick="clearLogs()">ğŸ—‘ï¸ ãƒ­ã‚°ã‚¯ãƒªã‚¢</button>
                <button class="glass-button" onclick="downloadLogs()">ğŸ’¾ ãƒ­ã‚°ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰</button>
            </div>
            <div id="logContainer">
                <div class="log-item">
                    <span class="log-time">--:--:--</span>
                    <span class="log-level-info">[INFO]</span>
                    <span>ãƒ†ã‚¹ãƒˆãƒ„ãƒ¼ãƒ«ãŒæº–å‚™å®Œäº†ã—ã¾ã—ãŸ</span>
                </div>
            </div>
        </div>

        <!-- è¨ºæ–­ãƒ¬ãƒãƒ¼ãƒˆ -->
        <div class="diagnostic-section" id="diagnosticSection" style="display: none;">
            <h3>ğŸ” è¨ºæ–­ãƒ¬ãƒãƒ¼ãƒˆ</h3>
            <div class="diagnostic-controls">
                <button class="glass-button" onclick="copyDiagnosticReport()">ğŸ“‹ ãƒ¬ãƒãƒ¼ãƒˆã‚³ãƒ”ãƒ¼</button>
                <button class="glass-button" onclick="downloadDiagnosticReport()">ğŸ’¾ ãƒ¬ãƒãƒ¼ãƒˆãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰</button>
                <button class="glass-button" onclick="closeDiagnosticReport()">âœ• é–‰ã˜ã‚‹</button>
            </div>
            <div class="diagnostic-content" id="diagnosticContent">
                <!-- è¨ºæ–­ãƒ¬ãƒãƒ¼ãƒˆãŒå‹•çš„ã«ç”Ÿæˆã•ã‚Œã‚‹ -->
            </div>
        </div>
    </div>

    <!-- å¿…è¦ãªã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’èª­ã¿è¾¼ã¿ -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
    
    <!-- ãƒ†ã‚¹ãƒˆç”¨æœ€å°æ§‹æˆ: ã‚µãƒ¼ãƒãƒ¼ãƒ¬ã‚¹å¯¾å¿œ -->
    <script>
        // ãƒ†ã‚¹ãƒˆç”¨ç°¡æ˜“ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆå®šç¾©
        window.AI_PROMPTS = {
            INSIGHT_CLARITY: (text, context) => `ä»¥ä¸‹ã®çŸ¥è¦‹ã‚’æ•´ç†ã—ã¦ãã ã•ã„: ${text}`,
            KNOWLEDGE_RELATIONSHIPS: (insights) => `çŸ¥è¦‹é–“ã®é–¢ä¿‚æ€§ã‚’åˆ†æã—ã¦ãã ã•ã„`,
            SESSION_SUMMARY: (theme, history, insights) => `ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’ã¾ã¨ã‚ã¦ãã ã•ã„`
        };
        
        // ãƒ†ã‚¹ãƒˆç”¨ç°¡æ˜“ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
        window.showMessage = (type, message) => console.log(`[${type}] ${message}`);
        
        // ãƒ†ã‚¹ãƒˆç”¨AppState
        window.AppState = {
            apiKey: 'test-api-key-mock',
            conversationHistory: [],
            extractedKnowledge: [],
            currentTheme: 'ãƒ†ã‚¹ãƒˆã‚»ãƒƒã‚·ãƒ§ãƒ³',
            sessionActive: false
        };
        
        console.log('âœ… ãƒ†ã‚¹ãƒˆç”¨æœ€å°ç’°å¢ƒã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—å®Œäº†');
    </script>
    
    <!-- ãƒ†ã‚¹ãƒˆãƒ„ãƒ¼ãƒ«ã«å¿…è¦ãªãƒ•ã‚¡ã‚¤ãƒ«ã®ã¿èª­ã¿è¾¼ã¿ï¼ˆèª­ã¿è¾¼ã¿é †åºé‡è¦ï¼‰ -->
    <script src="test-globals.js"></script>
    <script src="../../app/data-manager.js"></script>
<script src="../../app/file-manager.js"></script>
<script src="knowledge-file-manager-interface.js"></script>
    <script src="test-knowledge-file-manager.js"></script>
    <script src="test-runner.js"></script>
    
    <!-- ãƒ¡ã‚¤ãƒ³ã‚¢ãƒ—ãƒªã®ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆãƒ†ã‚¹ãƒˆãƒ„ãƒ¼ãƒ«ã§ã¯ä¸è¦ã ãŒä¾å­˜é–¢ä¿‚ã®ãŸã‚èª­ã¿è¾¼ã¿ï¼‰ -->
    <!-- <script src="app/ui-advanced.js"></script> -->
    <!-- <script src="app/file-processing.js"></script> -->
    <!-- <script src="app/api-key-setup.js"></script> -->
    <!-- <script src="app/session-manager.js"></script> -->
    <!-- <script src="app/phase-manager.js"></script> -->
    <!-- <script src="app/session-start-manager.js"></script> -->
    <!-- <script src="app/voice-phase2-manager.js"></script> -->
    <!-- <script src="app/script.js"></script> -->

    <script>
        // =================================================================================
        // ãƒ†ã‚¹ãƒˆUIç®¡ç†
        // =================================================================================

        let currentTestSession = {
            startTime: null,
            results: [],
            isRunning: false
        };

        let allLogs = []; // å…¨ãƒ­ã‚°ã‚’ä¿å­˜
        let systemInfo = null; // ã‚·ã‚¹ãƒ†ãƒ æƒ…å ±ã‚’ä¿å­˜

        // ãƒ­ã‚°å‡ºåŠ›ã‚’ã‚¤ãƒ³ã‚¿ãƒ¼ã‚»ãƒ—ãƒˆ
        const originalConsoleLog = console.log;
        const originalConsoleError = console.error;
        const originalConsoleWarn = console.warn;

        console.log = function(...args) {
            originalConsoleLog.apply(console, arguments);
            const message = args.join(' ');
            addLogEntry('info', message);
            saveLogToMemory('info', message);
        };

        console.error = function(...args) {
            originalConsoleError.apply(console, arguments);
            const message = args.join(' ');
            addLogEntry('error', message);
            saveLogToMemory('error', message);
        };

        console.warn = function(...args) {
            originalConsoleWarn.apply(console, arguments);
            const message = args.join(' ');
            addLogEntry('warn', message);
            saveLogToMemory('warn', message);
        };

        // ãƒ­ã‚°ã‚’ãƒ¡ãƒ¢ãƒªã«ä¿å­˜
        function saveLogToMemory(level, message) {
            const timestamp = new Date().toISOString();
            const logEntry = {
                timestamp,
                level,
                message,
                time: new Date().toLocaleTimeString()
            };
            allLogs.push(logEntry);
        }

        // ãƒ­ã‚°ã‚¨ãƒ³ãƒˆãƒªãƒ¼è¿½åŠ 
        function addLogEntry(level, message) {
            const logContainer = document.getElementById('logContainer');
            const logItem = document.createElement('div');
            logItem.className = 'log-item';
            
            const now = new Date();
            const timeStr = now.toLocaleTimeString();
            
            logItem.innerHTML = `
                <span class="log-time">${timeStr}</span>
                <span class="log-level-${level}">[${level.toUpperCase()}]</span>
                <span>${message}</span>
            `;
            
            logContainer.appendChild(logItem);
            
            // è‡ªå‹•ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«
            if (document.getElementById('autoScroll').checked) {
                logContainer.scrollTop = logContainer.scrollHeight;
            }
        }

        // ãƒ†ã‚¹ãƒˆçµæœã‚«ãƒ¼ãƒ‰è¿½åŠ 
        function addResultCard(testName, status, duration, error = null) {
            const resultsGrid = document.getElementById('resultsGrid');
            const resultCard = document.createElement('div');
            resultCard.className = `result-card ${status}`;
            
            let statusClass = 'status-pass';
            let statusText = 'âœ… æˆåŠŸ';
            
            if (status === 'fail') {
                statusClass = 'status-fail';
                statusText = 'âŒ å¤±æ•—';
            } else if (status === 'running') {
                statusClass = 'status-running';
                statusText = 'ğŸ”„ å®Ÿè¡Œä¸­';
            }
            
            resultCard.innerHTML = `
                <div class="result-title">
                    ${testName}
                    <span class="result-status ${statusClass}">${statusText}</span>
                </div>
                <div class="result-details">
                    <div class="result-time">å®Ÿè¡Œæ™‚é–“: ${duration}ms</div>
                    ${error ? `<div class="error-details">${error}</div>` : ''}
                </div>
            `;
            
            resultsGrid.appendChild(resultCard);
            
            // è‡ªå‹•ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«
            if (document.getElementById('autoScroll').checked) {
                resultCard.scrollIntoView({ behavior: 'smooth' });
            }
        }

        // é€²è¡ŒçŠ¶æ³æ›´æ–°
        function updateProgress(current, total, statusText) {
            const progressFill = document.getElementById('progressFill');
            const statusElement = document.getElementById('statusText');
            
            const percentage = total > 0 ? (current / total) * 100 : 0;
            progressFill.style.width = `${percentage}%`;
            statusElement.textContent = statusText;
        }

        // ã‚µãƒãƒªãƒ¼æ›´æ–°
        function updateSummary(results) {
            const summarySection = document.getElementById('summarySection');
            const totalTests = document.getElementById('totalTests');
            const passedTests = document.getElementById('passedTests');
            const failedTests = document.getElementById('failedTests');
            const totalTime = document.getElementById('totalTime');
            
            const passed = results.filter(r => r.status === 'PASS').length;
            const total = results.length;
            const totalDuration = results.reduce((sum, r) => sum + r.duration, 0);
            
            totalTests.textContent = total;
            passedTests.textContent = passed;
            failedTests.textContent = total - passed;
            totalTime.textContent = `${totalDuration}ms`;
            
            summarySection.style.display = 'block';
        }

        // ãƒœã‚¿ãƒ³çŠ¶æ…‹ç®¡ç†
        function setButtonsEnabled(enabled) {
            const buttons = document.querySelectorAll('.test-button');
            buttons.forEach(btn => {
                btn.disabled = !enabled;
            });
        }

        // å…¨ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
        async function runAllTestsUI() {
            console.log('ğŸš€ å…¨ãƒ†ã‚¹ãƒˆå®Ÿè¡Œé–‹å§‹');
            
            setButtonsEnabled(false);
            currentTestSession.startTime = Date.now();
            currentTestSession.results = [];
            currentTestSession.isRunning = true;
            
            updateProgress(0, 1, 'å…¨ãƒ†ã‚¹ãƒˆå®Ÿè¡Œä¸­...');
            
            try {
                // ä¾å­˜é–¢ä¿‚ã®ç¢ºèªã¨åˆæœŸåŒ–
                console.log('ğŸ”§ ä¾å­˜é–¢ä¿‚ãƒã‚§ãƒƒã‚¯é–‹å§‹...');
                
                // SessionControllerã®åˆæœŸåŒ–ç¢ºèª
                if (typeof window.SessionController !== 'undefined') {
                    if (!window.SessionController.interface) {
                        try {
                            window.SessionController.init();
                            console.log('âœ… SessionControlleråˆæœŸåŒ–å®Œäº†');
                        } catch (error) {
                            console.warn('âš ï¸ SessionControlleråˆæœŸåŒ–å¤±æ•—:', error);
                        }
                    }
                }
                
                // runCompleteTestsé–¢æ•°ã®å­˜åœ¨ç¢ºèª
                if (typeof window.runCompleteTests !== 'function') {
                    throw new Error('runCompleteTestsé–¢æ•°ãŒå®šç¾©ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚test-runner.jsãŒæ­£ã—ãèª­ã¿è¾¼ã¾ã‚Œã¦ã„ãªã„å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚');
                }
                
                console.log('âœ… ä¾å­˜é–¢ä¿‚ãƒã‚§ãƒƒã‚¯å®Œäº†');
                
                await window.runCompleteTests();
                
                // KnowledgeFileManagerTestsã®çµæœã‚’å–å¾—
                const testResults = window.KnowledgeFileManagerTests ? window.KnowledgeFileManagerTests.results : [];
                
                // UIçµæœã‚’æ›´æ–°
                testResults.forEach(result => {
                    addResultCard(result.name, result.status === 'PASS' ? 'pass' : 'fail', result.duration, result.error);
                });
                
                updateSummary(testResults);
                updateProgress(1, 1, 'å…¨ãƒ†ã‚¹ãƒˆå®Œäº†');
                
                console.log('âœ… å…¨ãƒ†ã‚¹ãƒˆå®Ÿè¡Œå®Œäº†');
                
            } catch (error) {
                console.error('âŒ ãƒ†ã‚¹ãƒˆå®Ÿè¡Œã‚¨ãƒ©ãƒ¼:', error.message);
                addResultCard('å…¨ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ', 'fail', Date.now() - currentTestSession.startTime, error.message);
                updateProgress(1, 1, 'ãƒ†ã‚¹ãƒˆå®Ÿè¡Œã‚¨ãƒ©ãƒ¼');
            } finally {
                setButtonsEnabled(true);
                currentTestSession.isRunning = false;
            }
        }

        // Phase 1ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
        async function runPhase1TestsUI() {
            console.log('ğŸ”§ Phase 1ãƒ†ã‚¹ãƒˆå®Ÿè¡Œé–‹å§‹');
            
            setButtonsEnabled(false);
            updateProgress(0, 1, 'Phase 1ãƒ†ã‚¹ãƒˆå®Ÿè¡Œä¸­...');
            
            try {
                await runPhase1Tests();
                console.log('âœ… Phase 1ãƒ†ã‚¹ãƒˆå®Œäº†');
                updateProgress(1, 1, 'Phase 1ãƒ†ã‚¹ãƒˆå®Œäº†');
            } catch (error) {
                console.error('âŒ Phase 1ãƒ†ã‚¹ãƒˆã‚¨ãƒ©ãƒ¼:', error.message);
                updateProgress(1, 1, 'Phase 1ãƒ†ã‚¹ãƒˆã‚¨ãƒ©ãƒ¼');
            } finally {
                setButtonsEnabled(true);
            }
        }

        // çµ±åˆãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
        async function runIntegrationTestUI() {
            console.log('ğŸ”— çµ±åˆãƒ†ã‚¹ãƒˆå®Ÿè¡Œé–‹å§‹');
            
            setButtonsEnabled(false);
            updateProgress(0, 1, 'çµ±åˆãƒ†ã‚¹ãƒˆå®Ÿè¡Œä¸­...');
            
            try {
                await runIntegrationTest();
                console.log('âœ… çµ±åˆãƒ†ã‚¹ãƒˆå®Œäº†');
                updateProgress(1, 1, 'çµ±åˆãƒ†ã‚¹ãƒˆå®Œäº†');
            } catch (error) {
                console.error('âŒ çµ±åˆãƒ†ã‚¹ãƒˆã‚¨ãƒ©ãƒ¼:', error.message);
                updateProgress(1, 1, 'çµ±åˆãƒ†ã‚¹ãƒˆã‚¨ãƒ©ãƒ¼');
            } finally {
                setButtonsEnabled(true);
            }
        }

        // å€‹åˆ¥ãƒ†ã‚¹ãƒˆè¡¨ç¤º
        function showIndividualTests() {
            alert('å€‹åˆ¥ãƒ†ã‚¹ãƒˆæ©Ÿèƒ½ã¯æ¬¡å›å®Ÿè£…äºˆå®šã§ã™');
        }

        // çµæœã‚¯ãƒªã‚¢
        function clearResults() {
            document.getElementById('resultsGrid').innerHTML = '';
            document.getElementById('summarySection').style.display = 'none';
            document.getElementById('logContainer').innerHTML = `
                <div class="log-item">
                    <span class="log-time">${new Date().toLocaleTimeString()}</span>
                    <span class="log-level-info">[INFO]</span>
                    <span>çµæœã‚’ã‚¯ãƒªã‚¢ã—ã¾ã—ãŸ</span>
                </div>
            `;
            updateProgress(0, 1, 'ãƒ†ã‚¹ãƒˆã‚’é–‹å§‹ã—ã¦ãã ã•ã„');
        }

        // çµæœã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ
        function exportResults() {
            const results = currentTestSession.results;
            const timestamp = new Date().toISOString().replace(/[:.]/g, '-');
            const filename = `test-results-${timestamp}.json`;
            
            const exportData = {
                timestamp: new Date().toISOString(),
                summary: {
                    total: results.length,
                    passed: results.filter(r => r.status === 'PASS').length,
                    failed: results.filter(r => r.status === 'FAIL').length
                },
                results: results
            };
            
            const blob = new Blob([JSON.stringify(exportData, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const link = document.createElement('a');
            link.href = url;
            link.download = filename;
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            URL.revokeObjectURL(url);
            
            console.log('ğŸ“„ ãƒ†ã‚¹ãƒˆçµæœã‚’ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã—ã¾ã—ãŸ:', filename);
        }

        // ãƒ­ã‚°ç®¡ç†ã¨ãƒ¬ãƒãƒ¼ãƒˆæ©Ÿèƒ½
        // =================================================================================

        // å…¨ãƒ­ã‚°ã‚³ãƒ”ãƒ¼
        function copyAllLogs() {
            const logText = allLogs.map(log => 
                `[${log.timestamp}] ${log.level.toUpperCase()}: ${log.message}`
            ).join('\n');
            
            copyToClipboard(logText, 'å…¨ãƒ­ã‚°ã‚’ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸ');
        }

        // ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ã®ã¿ã‚³ãƒ”ãƒ¼
        function copyErrorLogs() {
            const errorLogs = allLogs.filter(log => log.level === 'error');
            const logText = errorLogs.map(log => 
                `[${log.timestamp}] ${log.level.toUpperCase()}: ${log.message}`
            ).join('\n');
            
            copyToClipboard(logText, 'ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ã‚’ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸ');
        }

        // ãƒ­ã‚°ã‚¯ãƒªã‚¢
        function clearLogs() {
            allLogs = [];
            document.getElementById('logContainer').innerHTML = '';
            addLogEntry('info', 'ãƒ­ã‚°ãŒã‚¯ãƒªã‚¢ã•ã‚Œã¾ã—ãŸ');
        }

        // ãƒ­ã‚°ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
        function downloadLogs() {
            const logText = allLogs.map(log => 
                `[${log.timestamp}] ${log.level.toUpperCase()}: ${log.message}`
            ).join('\n');
            
            const blob = new Blob([logText], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `test-logs-${new Date().toISOString().slice(0, 19).replace(/:/g, '-')}.txt`;
            a.click();
            URL.revokeObjectURL(url);
            
            showNotification('ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¾ã—ãŸ');
        }

        // è¨ºæ–­ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆ
        function generateDiagnosticReport() {
            collectSystemInfo();
            const report = createDiagnosticReport();
            
            const section = document.getElementById('diagnosticSection');
            const content = document.getElementById('diagnosticContent');
            
            content.innerHTML = report;
            section.style.display = 'block';
            section.scrollIntoView({ behavior: 'smooth' });
        }

        // è¨ºæ–­ãƒ¬ãƒãƒ¼ãƒˆã‚³ãƒ”ãƒ¼
        function copyDiagnosticReport() {
            const content = document.getElementById('diagnosticContent');
            const reportText = content.textContent || content.innerText;
            copyToClipboard(reportText, 'è¨ºæ–­ãƒ¬ãƒãƒ¼ãƒˆã‚’ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸ');
        }

        // è¨ºæ–­ãƒ¬ãƒãƒ¼ãƒˆãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
        function downloadDiagnosticReport() {
            const content = document.getElementById('diagnosticContent');
            const reportText = content.textContent || content.innerText;
            
            const blob = new Blob([reportText], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `diagnostic-report-${new Date().toISOString().slice(0, 19).replace(/:/g, '-')}.txt`;
            a.click();
            URL.revokeObjectURL(url);
            
            showNotification('è¨ºæ–­ãƒ¬ãƒãƒ¼ãƒˆã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¾ã—ãŸ');
        }

        // è¨ºæ–­ãƒ¬ãƒãƒ¼ãƒˆã‚’é–‰ã˜ã‚‹
        function closeDiagnosticReport() {
            document.getElementById('diagnosticSection').style.display = 'none';
        }

        // ã‚·ã‚¹ãƒ†ãƒ æƒ…å ±åé›†
        function collectSystemInfo() {
            systemInfo = {
                timestamp: new Date().toISOString(),
                userAgent: navigator.userAgent,
                platform: navigator.platform,
                language: navigator.language,
                cookieEnabled: navigator.cookieEnabled,
                onLine: navigator.onLine,
                screenWidth: window.screen.width,
                screenHeight: window.screen.height,
                windowWidth: window.innerWidth,
                windowHeight: window.innerHeight,
                timezone: Intl.DateTimeFormat().resolvedOptions().timeZone,
                memory: navigator.deviceMemory || 'unknown',
                hardwareConcurrency: navigator.hardwareConcurrency || 'unknown',
                connection: navigator.connection ? {
                    effectiveType: navigator.connection.effectiveType,
                    downlink: navigator.connection.downlink,
                    rtt: navigator.connection.rtt,
                    saveData: navigator.connection.saveData
                } : 'unknown'
            };
        }

        // è¨ºæ–­ãƒ¬ãƒãƒ¼ãƒˆä½œæˆ
        function createDiagnosticReport() {
            const errorLogs = allLogs.filter(log => log.level === 'error');
            const warningLogs = allLogs.filter(log => log.level === 'warn');
            const testResults = currentTestSession.results;
            
            const report = `
ğŸ” æ·±å €ãã‚“v2.0 KnowledgeFileManager ãƒ†ã‚¹ãƒˆè¨ºæ–­ãƒ¬ãƒãƒ¼ãƒˆ
================================================================

ğŸ“… ç”Ÿæˆæ—¥æ™‚: ${new Date().toISOString()}
ğŸŒ ãƒ–ãƒ©ã‚¦ã‚¶: ${navigator.userAgent}
ğŸ’» ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ : ${navigator.platform}
ğŸŒ è¨€èª: ${navigator.language}
ğŸ“ ç”»é¢ã‚µã‚¤ã‚º: ${window.screen.width}x${window.screen.height}
ğŸ“ ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã‚µã‚¤ã‚º: ${window.innerWidth}x${window.innerHeight}
ğŸ• ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³: ${Intl.DateTimeFormat().resolvedOptions().timeZone}
ğŸ’¾ ãƒ¡ãƒ¢ãƒª: ${navigator.deviceMemory || 'unknown'}GB
ğŸ”§ CPU ã‚³ã‚¢æ•°: ${navigator.hardwareConcurrency || 'unknown'}
ğŸŒ ã‚ªãƒ³ãƒ©ã‚¤ãƒ³çŠ¶æ…‹: ${navigator.onLine ? 'ã‚ªãƒ³ãƒ©ã‚¤ãƒ³' : 'ã‚ªãƒ•ãƒ©ã‚¤ãƒ³'}
ğŸ”— æ¥ç¶šæƒ…å ±: ${navigator.connection ? 
    `${navigator.connection.effectiveType} (${navigator.connection.downlink}Mbps, ${navigator.connection.rtt}ms RTT)` : 
    'unknown'}

ğŸ“Š ãƒ†ã‚¹ãƒˆçµæœã‚µãƒãƒªãƒ¼
================================================================
ğŸ“ ç·ãƒ†ã‚¹ãƒˆæ•°: ${testResults.length}
âœ… æˆåŠŸ: ${testResults.filter(r => r.status === 'PASS').length}
âŒ å¤±æ•—: ${testResults.filter(r => r.status === 'FAIL').length}
â±ï¸ ç·å®Ÿè¡Œæ™‚é–“: ${testResults.reduce((sum, r) => sum + r.duration, 0)}ms

${testResults.length > 0 ? `
ğŸ“‹ è©³ç´°ãƒ†ã‚¹ãƒˆçµæœ:
${testResults.map(r => `  â€¢ ${r.name}: ${r.status} (${r.duration}ms)${r.error ? `\n    ã‚¨ãƒ©ãƒ¼: ${r.error}` : ''}`).join('\n')}
` : ''}

ğŸš¨ ã‚¨ãƒ©ãƒ¼ãƒ­ã‚° (${errorLogs.length}ä»¶)
================================================================
${errorLogs.length > 0 ? errorLogs.map(log => 
    `[${log.timestamp}] ${log.message}`
).join('\n') : 'âœ… ã‚¨ãƒ©ãƒ¼ã¯ç™ºç”Ÿã—ã¦ã„ã¾ã›ã‚“'}

âš ï¸ è­¦å‘Šãƒ­ã‚° (${warningLogs.length}ä»¶)
================================================================
${warningLogs.length > 0 ? warningLogs.map(log => 
    `[${log.timestamp}] ${log.message}`
).join('\n') : 'âœ… è­¦å‘Šã¯ç™ºç”Ÿã—ã¦ã„ã¾ã›ã‚“'}

ğŸ“‹ å…¨ãƒ­ã‚°å±¥æ­´ (${allLogs.length}ä»¶)
================================================================
${allLogs.map(log => 
    `[${log.timestamp}] ${log.level.toUpperCase()}: ${log.message}`
).join('\n')}

ğŸ”§ æ¨å¥¨ã•ã‚Œã‚‹å¯¾å‡¦æ³•
================================================================
${generateTroubleshootingTips()}

ğŸ’¡ è¿½åŠ æƒ…å ±
================================================================
â€¢ ã“ã®ãƒ¬ãƒãƒ¼ãƒˆã¯å•é¡Œã®èª¿æŸ»ã¨è§£æ±ºã«å½¹ç«‹ã¡ã¾ã™
â€¢ ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ãŸå ´åˆã¯ã€ã“ã®ãƒ¬ãƒãƒ¼ãƒˆã‚’é–‹ç™ºè€…ã«å…±æœ‰ã—ã¦ãã ã•ã„
â€¢ ãƒ­ã‚°ã¯æ™‚ç³»åˆ—é †ã«è¡¨ç¤ºã•ã‚Œã¦ã„ã¾ã™
â€¢ ã‚·ã‚¹ãƒ†ãƒ æƒ…å ±ã¯è¨ºæ–­ã®å‚è€ƒã¨ã—ã¦å«ã¾ã‚Œã¦ã„ã¾ã™

================================================================
ğŸ“„ ãƒ¬ãƒãƒ¼ãƒˆçµ‚äº†
            `;
            
            return report;
        }

        // ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã®ãƒ’ãƒ³ãƒˆç”Ÿæˆ
        function generateTroubleshootingTips() {
            const errorLogs = allLogs.filter(log => log.level === 'error');
            const testResults = currentTestSession.results;
            const failedTests = testResults.filter(r => r.status === 'FAIL');
            
            let tips = [];
            
            if (errorLogs.length === 0 && failedTests.length === 0) {
                tips.push('âœ… ã‚·ã‚¹ãƒ†ãƒ ã¯æ­£å¸¸ã«å‹•ä½œã—ã¦ã„ã¾ã™');
            } else {
                if (errorLogs.some(log => log.message.includes('KnowledgeFileManager'))) {
                    tips.push('ğŸ”§ KnowledgeFileManagerã®åˆæœŸåŒ–ã«å•é¡ŒãŒã‚ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™');
                    tips.push('   â€¢ æ·±å €ãã‚“.htmlã§KnowledgeFileManagerãŒæ­£ã—ãèª­ã¿è¾¼ã¾ã‚Œã¦ã„ã‚‹ã‹ç¢ºèªã—ã¦ãã ã•ã„');
                    tips.push('   â€¢ ãƒ–ãƒ©ã‚¦ã‚¶ã®ãƒ‡ãƒ™ãƒ­ãƒƒãƒ‘ãƒ¼ãƒ„ãƒ¼ãƒ«ã§ã‚¨ãƒ©ãƒ¼ã‚’ç¢ºèªã—ã¦ãã ã•ã„');
                }
                
                if (errorLogs.some(log => log.message.includes('network') || log.message.includes('fetch'))) {
                    tips.push('ğŸŒ ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯æ¥ç¶šã«å•é¡ŒãŒã‚ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™');
                    tips.push('   â€¢ ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆæ¥ç¶šã‚’ç¢ºèªã—ã¦ãã ã•ã„');
                    tips.push('   â€¢ ãƒ­ãƒ¼ã‚«ãƒ«ã‚µãƒ¼ãƒãƒ¼ãŒèµ·å‹•ã—ã¦ã„ã‚‹ã‹ç¢ºèªã—ã¦ãã ã•ã„');
                }
                
                if (failedTests.some(test => test.name.includes('Mock'))) {
                    tips.push('ğŸ­ ãƒ¢ãƒƒã‚¯æ©Ÿèƒ½ã«å•é¡ŒãŒã‚ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™');
                    tips.push('   â€¢ ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã®ç”Ÿæˆã«å¤±æ•—ã—ã¦ã„ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™');
                }
                
                if (errorLogs.some(log => log.message.includes('Permission') || log.message.includes('CORS'))) {
                    tips.push('ğŸ” æ¨©é™ã¾ãŸã¯CORSã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¦ã„ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™');
                    tips.push('   â€¢ ãƒ­ãƒ¼ã‚«ãƒ«ã‚µãƒ¼ãƒãƒ¼çµŒç”±ã§ã‚¢ã‚¯ã‚»ã‚¹ã—ã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¦ãã ã•ã„');
                    tips.push('   â€¢ python3 start-test-server.py ã§ã‚µãƒ¼ãƒãƒ¼ã‚’èµ·å‹•ã—ã¦ãã ã•ã„');
                }
            }
            
            if (tips.length === 0) {
                tips.push('â“ å…·ä½“çš„ãªå•é¡ŒãŒç‰¹å®šã§ãã¾ã›ã‚“ã§ã—ãŸ');
                tips.push('   â€¢ ã“ã®ãƒ¬ãƒãƒ¼ãƒˆã‚’é–‹ç™ºè€…ã«å…±æœ‰ã—ã¦ãã ã•ã„');
                tips.push('   â€¢ ãƒ–ãƒ©ã‚¦ã‚¶ã®ãƒ‡ãƒ™ãƒ­ãƒƒãƒ‘ãƒ¼ãƒ„ãƒ¼ãƒ«ã§è¿½åŠ æƒ…å ±ã‚’ç¢ºèªã—ã¦ãã ã•ã„');
            }
            
            return tips.join('\n');
        }

        // ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼
        function copyToClipboard(text, message) {
            navigator.clipboard.writeText(text).then(() => {
                showNotification(message);
            }).catch(err => {
                console.error('ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã¸ã®ã‚³ãƒ”ãƒ¼ã«å¤±æ•—ã—ã¾ã—ãŸ:', err);
                showNotification('ã‚³ãƒ”ãƒ¼ã«å¤±æ•—ã—ã¾ã—ãŸ', 'error');
            });
        }

        // é€šçŸ¥è¡¨ç¤º
        function showNotification(message, type = 'success') {
            const notification = document.createElement('div');
            notification.className = 'copy-notification';
            notification.textContent = message;
            
            if (type === 'error') {
                notification.style.background = '#f44336';
            }
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.classList.add('show');
            }, 10);
            
            setTimeout(() => {
                notification.classList.remove('show');
                setTimeout(() => {
                    document.body.removeChild(notification);
                }, 300);
            }, 2000);
        }

        // åˆæœŸåŒ–
        document.addEventListener('DOMContentLoaded', function() {
            console.log('ğŸ§ª ãƒ†ã‚¹ãƒˆãƒ„ãƒ¼ãƒ«ãŒåˆæœŸåŒ–ã•ã‚Œã¾ã—ãŸ');
            
            // åˆæœŸãƒ­ã‚°
            const now = new Date();
            document.querySelector('.log-time').textContent = now.toLocaleTimeString();
        });
    </script>
</body>
</html> 