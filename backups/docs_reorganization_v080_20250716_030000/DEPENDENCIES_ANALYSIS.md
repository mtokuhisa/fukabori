# æ·±å €ãã‚“ v2.0 - ä¾å­˜é–¢ä¿‚åˆ†æï¼ˆStep1.2ä¿®æ­£å¾Œï¼‰

## æ›´æ–°æ—¥æ™‚
2025å¹´7æœˆ5æ—¥ 15:40 - Step1.2: å‚ç…§æ–¹æ³•ã®çµ±ä¸€å®Œäº†å¾Œ

## ç¾åœ¨ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«æ§‹æˆ

### 1. app/utils.js (4,312 bytes)
**å½¹å‰²**: åŸºç¤ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£é–¢æ•°
**æä¾›é–¢æ•°**:
- `showMessage(type, message)` - ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤º
- `downloadTextFile(content, filename)` - ãƒ•ã‚¡ã‚¤ãƒ«ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
- `encryptApiKey(apiKey, password)` - APIã‚­ãƒ¼æš—å·åŒ–
- `decryptApiKey(encryptedKey, password)` - APIã‚­ãƒ¼å¾©å·åŒ–
- `hashPassword(password)` - ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒãƒƒã‚·ãƒ¥åŒ–

**ã‚°ãƒ­ãƒ¼ãƒãƒ«å…¬é–‹**:
- `window.showMessage`
- `window.downloadTextFile`
- `window.encryptApiKey`
- `window.decryptApiKey`
- `window.hashPassword`
- `window.FukaboriUtils.*` (åå‰ç©ºé–“ç‰ˆ)

**ä¾å­˜é–¢ä¿‚**: ãªã—ï¼ˆç‹¬ç«‹ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ï¼‰

### 2. app/script.js (309,942 bytes â†’ ä¿®æ­£æ¸ˆã¿)
**å½¹å‰²**: ãƒ¡ã‚¤ãƒ³ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ­ã‚¸ãƒƒã‚¯
**utils.jsä¾å­˜**:
- `window.showMessage()`: 98å›å‘¼ã³å‡ºã— âœ…
- `window.hashPassword()`: 6å›å‘¼ã³å‡ºã— âœ…
- ãã®ä»–utilsé–¢æ•°: é©å®œä½¿ç”¨

**ä¾å­˜é–¢ä¿‚**: utils.js â† script.jsï¼ˆä¸€æ–¹å‘ï¼‰

### 3. app/file-processing.js (71,021 bytes â†’ ä¿®æ­£æ¸ˆã¿)
**å½¹å‰²**: ãƒ•ã‚¡ã‚¤ãƒ«å‡¦ç†ã‚·ã‚¹ãƒ†ãƒ 
**utils.jsä¾å­˜**:
- `FileProcessingInterface.showMessage()`: 3å›ï¼ˆå†…éƒ¨ã§window.showMessageä½¿ç”¨ï¼‰âœ…
- ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹çµŒç”±ã§å®‰å…¨ã«ä¾å­˜

**ä¾å­˜é–¢ä¿‚**: utils.js â† file-processing.jsï¼ˆä¸€æ–¹å‘ï¼‰

### 4. app/knowledge-management.js (52,150 bytes â†’ ä¿®æ­£æ¸ˆã¿)
**å½¹å‰²**: çŸ¥è¦‹ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ 
**utils.jsä¾å­˜**:
- `window.showMessage()`: 6å›å‘¼ã³å‡ºã— âœ…
- `window.downloadTextFile()`: 1å›å‘¼ã³å‡ºã— âœ…

**ä¾å­˜é–¢ä¿‚**: utils.js â† knowledge-management.jsï¼ˆä¸€æ–¹å‘ï¼‰

### 5. app/api-key-setup.js (24,323 bytes)
**å½¹å‰²**: APIã‚­ãƒ¼è¨­å®šãƒ¢ãƒ¼ãƒ€ãƒ«
**utils.jsä¾å­˜**:
- `window.showMessage()`: 4å›å‘¼ã³å‡ºã— âœ…ï¼ˆä¿®æ­£å‰ã‹ã‚‰æ­£å¸¸ï¼‰

**ä¾å­˜é–¢ä¿‚**: utils.js â† api-key-setup.jsï¼ˆä¸€æ–¹å‘ï¼‰

## ä¿®æ­£å‰å¾Œã®æ¯”è¼ƒ

### ä¿®æ­£å‰ã®å•é¡Œç‚¹
1. **ç›´æ¥å‘¼ã³å‡ºã—**: script.jså†…ã§`showMessage()`ã€`hashPassword()`ã‚’ç›´æ¥å‘¼ã³å‡ºã—
2. **å¾ªç’°ä¾å­˜**: file-processing.jså†…ã§ç‹¬è‡ªshowMessageå®Ÿè£…
3. **å‚ç…§æ–¹æ³•æ··åœ¨**: åŒä¸€ãƒ•ã‚¡ã‚¤ãƒ«å†…ã§ç›´æ¥å‘¼ã³å‡ºã—ã¨windowçµŒç”±ãŒæ··åœ¨

### ä¿®æ­£å¾Œã®æ”¹å–„ç‚¹
1. **çµ±ä¸€å‚ç…§**: å…¨ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã§`window.é–¢æ•°å()`å½¢å¼ã«çµ±ä¸€
2. **å¾ªç’°ä¾å­˜è§£æ¶ˆ**: file-processing.jsã®ç‹¬è‡ªå®Ÿè£…ã‚’å‰Šé™¤
3. **ä¸€æ–¹å‘ä¾å­˜**: utils.js â†’ ä»–ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®æ˜ç¢ºãªä¾å­˜é–¢ä¿‚

## ç¾åœ¨ã®ä¾å­˜é–¢ä¿‚ãƒãƒƒãƒ—

```
utils.js (åŸºç¤ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£)
â”œâ”€â”€ window.showMessage
â”œâ”€â”€ window.hashPassword
â”œâ”€â”€ window.downloadTextFile
â”œâ”€â”€ window.encryptApiKey
â””â”€â”€ window.decryptApiKey
     â†‘
     â”œâ”€â”€ script.js (ãƒ¡ã‚¤ãƒ³ãƒ­ã‚¸ãƒƒã‚¯)
     â”‚   â”œâ”€â”€ showMessage: 98å›
     â”‚   â””â”€â”€ hashPassword: 6å›
     â”œâ”€â”€ file-processing.js (ãƒ•ã‚¡ã‚¤ãƒ«å‡¦ç†)
     â”‚   â””â”€â”€ showMessage: 3å›ï¼ˆã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹çµŒç”±ï¼‰
     â”œâ”€â”€ knowledge-management.js (çŸ¥è¦‹ç®¡ç†)
     â”‚   â”œâ”€â”€ showMessage: 6å›
     â”‚   â””â”€â”€ downloadTextFile: 1å›
     â””â”€â”€ api-key-setup.js (APIã‚­ãƒ¼è¨­å®š)
         â””â”€â”€ showMessage: 4å›
```

## è§£æ±ºã—ãŸå•é¡Œ

### 1. ReferenceError ã®è§£æ¶ˆ
- **ä¿®æ­£å‰**: `ReferenceError: showMessage is not defined` (85ç®‡æ‰€)
- **ä¿®æ­£å¾Œ**: å…¨ã¦`window.showMessage()`çµŒç”±ã§è§£æ±º âœ…

### 2. å¾ªç’°ä¾å­˜ã®è§£æ¶ˆ
- **ä¿®æ­£å‰**: file-processing.jså†…ã§ç‹¬è‡ªshowMessageå®Ÿè£…
- **ä¿®æ­£å¾Œ**: window.showMessageçµŒç”±ã«çµ±ä¸€ âœ…

### 3. å‚ç…§æ–¹æ³•ã®çµ±ä¸€
- **ä¿®æ­£å‰**: ç›´æ¥å‘¼ã³å‡ºã—ã¨windowçµŒç”±ãŒæ··åœ¨
- **ä¿®æ­£å¾Œ**: å…¨ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã§windowçµŒç”±ã«çµ±ä¸€ âœ…

## ç¾åœ¨ã®çŠ¶æ…‹è©•ä¾¡

### âœ… æ­£å¸¸ãªä¾å­˜é–¢ä¿‚
1. **ä¸€æ–¹å‘ä¾å­˜**: utils.js â†’ ä»–ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«
2. **æ˜ç¢ºãªå¢ƒç•Œ**: å„ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®è²¬ä»»ç¯„å›²ãŒæ˜ç¢º
3. **çµ±ä¸€å‚ç…§**: å…¨ã¦windowçµŒç”±ã§å‚ç…§æ–¹æ³•ãŒçµ±ä¸€

### âš ï¸ æ³¨æ„ç‚¹
1. **ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚º**: script.js (309,942 bytes) ãŒä¾ç„¶ã¨ã—ã¦å¤§ãã„
2. **è¤‡é›‘æ€§**: script.jså†…ã®æ©Ÿèƒ½ãŒå¤šå²ã«ã‚ãŸã‚‹
3. **å°†æ¥èª²é¡Œ**: UI/DOMæ“ä½œã®åˆ†é›¢ãŒæ¬¡ã®èª²é¡Œ

### ğŸ¯ æ¬¡ã®åˆ†é›¢å€™è£œ
1. **UI/DOMæ“ä½œ**: DOMUtilsã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆåˆ†é›¢ï¼ˆç´„18è¡Œï¼‰
2. **åŸºæœ¬UIæ›´æ–°**: showMessage, updateSessionStatusç­‰ï¼ˆç´„200è¡Œï¼‰
3. **ç”»é¢é·ç§»**: show/hideLoginScreenç­‰ï¼ˆç´„50è¡Œï¼‰
4. **LocalStorage**: çŠ¶æ…‹ç®¡ç†æ©Ÿèƒ½ï¼ˆç´„120è¡Œï¼‰

## æ•´åˆæ€§ãƒã‚§ãƒƒã‚¯çµæœ

### é–¢æ•°å®šç¾©ãƒ»å…¬é–‹ã®ç¢ºèª
- âœ… utils.js: å…¨é–¢æ•°ãŒæ­£ã—ãå®šç¾©ãƒ»å…¬é–‹
- âœ… windowçµŒç”±: å…¨ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã§æ­£ã—ãå‚ç…§
- âœ… å¾ªç’°ä¾å­˜: è§£æ¶ˆæ¸ˆã¿
- âœ… å‚ç…§çµ±ä¸€: å®Œäº†

### å‘¼ã³å‡ºã—å›æ•°ã®ç¢ºèª
- âœ… script.js: showMessage 98å›ã€hashPassword 6å›
- âœ… file-processing.js: showMessage 3å›ï¼ˆã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹çµŒç”±ï¼‰
- âœ… knowledge-management.js: showMessage 6å›ã€downloadTextFile 1å›
- âœ… api-key-setup.js: showMessage 4å›

**ç·è¨ˆ**: showMessage 117å›ã€hashPassword 6å›ã€downloadTextFile 1å›

## çµè«–

**Step1.2ã®ä¿®æ­£ã«ã‚ˆã‚Šã€ä¾å­˜é–¢ä¿‚ã®å•é¡Œã¯å®Œå…¨ã«è§£æ±ºã•ã‚Œã¾ã—ãŸã€‚**

- ğŸ¯ **ç›®æ¨™é”æˆ**: å‚ç…§æ–¹æ³•ã®çµ±ä¸€å®Œäº†
- ğŸ”§ **å•é¡Œè§£æ±º**: ReferenceErrorã€å¾ªç’°ä¾å­˜ã€å‚ç…§æ··åœ¨ã®è§£æ¶ˆ
- ğŸ“Š **å“è³ªå‘ä¸Š**: æ˜ç¢ºã§å®‰å®šã—ãŸä¾å­˜é–¢ä¿‚ã®ç¢ºç«‹
- ğŸš€ **æº–å‚™å®Œäº†**: æ¬¡ãƒ•ã‚§ãƒ¼ã‚ºï¼ˆUI/DOMåˆ†é›¢ï¼‰ã¸ã®æº–å‚™å®Œäº† 